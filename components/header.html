<header id="main-navigation" class="navigation-header" style="display: none;">
    <h1 class="header-title">PhCard</h1>
    <nav id="main-nav-links">
        <!-- Navigation buttons will be populated by JavaScript based on context -->
    </nav>
</header>

<script>
// Initialize header navigation based on context
// Wait for DOM to be ready
(function() {
    function initHeader() {
        const nav = document.getElementById('main-nav-links');
        if (!nav) {
            console.error('Navigation element not found');
            return;
        }
        
        // Detect if we're in the main app or a feature page
        const isFeaturePage = window.location.pathname.includes('/web/features/');
        const basePath = isFeaturePage ? '../../' : '';
        
        let buttons = [];
        
        if (!isFeaturePage) {
            // Main app navigation - uses app functions
            buttons = [
                { label: 'Menü', onclick: "showScreen('menu-screen')" },
                { label: 'Shop', onclick: `window.location.href='${basePath}web/features/shop.html'`, id: 'shop-btn' },
                { label: 'Quests', onclick: `window.location.href='${basePath}web/features/quests.html'`, id: 'quests-btn' },
                { label: 'Achievements', onclick: `window.location.href='${basePath}web/features/achievements.html'`, id: 'achievements-btn' },
                { label: 'Card Sets', onclick: `window.location.href='${basePath}web/features/cardsets.html'`, id: 'card-sets-btn' },
                { label: 'Abmelden', onclick: "logout()" }
            ];
        } else {
            // Feature page navigation
            buttons = [
                { label: 'Menü', onclick: `window.location.href='${basePath}index.html'` },
                { label: 'Shop', onclick: "window.location.href='shop.html'", id: 'shop-btn' },
                { label: 'Quests', onclick: "window.location.href='quests.html'", id: 'quests-btn' },
                { label: 'Achievements', onclick: "window.location.href='achievements.html'", id: 'achievements-btn' },
                { label: 'Card Sets', onclick: "window.location.href='cardsets.html'", id: 'card-sets-btn' },
                { label: 'Abmelden', onclick: `window.location.href='${basePath}index.html'` }
            ];
        }
        
        // Create buttons
        nav.innerHTML = buttons.map(btn => 
            `<button class="nav-btn" ${btn.id ? `id="${btn.id}"` : ''} onclick="${btn.onclick}">${btn.label}</button>`
        ).join('');
    }
    
    // Run initialization when script loads
    if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', initHeader);
    } else {
        initHeader();
    }
})();
</script>
